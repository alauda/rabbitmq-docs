---
weight: 30
---

# 参数配置

RabbitMQ 实例中默认使用 RabbitMQ 官方提供的系统参数。您也可在界面便捷地配置参数。

<Directive type="info" title="提示">
RabbitMQ 版本升级后，如果有需要删除、废弃或变更的参数配置，请查阅 [RabbitMQ 官网](https://www.rabbitmq.com/configure.html#config-items) 对应修改。
</Directive>

<Directive type="warning" title="警告">
更新参数会导致实例重启，为了业务的稳定性，请在业务空闲时段更新参数。
</Directive>

## 操作步骤

<Tabs>

<Tab label="CLI">

实例的数据节点参数参数配置通过 RabbitMQ CR 资源的 `spec.rabbitmq.additionalConfig` 字段来指定。

```bash
# 更新 s6 实例的数据节点配置
kubectl -n default patch rabbitmqclusters <instance name> --type=merge --patch='{"spec": {"rabbitmq": {"additionalConfig":"channel_max=1000"}}}''
```
</Tab>

<Tab label="Web Console">
1. 在左侧导航栏中，单击 **RabbitMQ**。

2. 单击 ***命名空间的名称***。
2. 单击 ***实例名称*** 。
3. 在 **参数配置** 页签下，单击 **更新参数**。

4. 设置参数。

5. 单击 **更新**。

</Tab>

</Tabs>

## 参数支持说明
| 参数名 | 参数描述 | 取值范围 | 默认值 |
| --- | --- | --- | --- |
| num_acceptors.tcp | Number of Erlang processes that will accept connections for the TCP listeners. | -  | num_acceptors.tcp = 10 |
| handshake_timeout | Maximum time for AMQP 0-9-1 handshake (after socket connection and TLS handshake), in milliseconds. | -  | handshake_timeout = 10000 |
| vm_memory_high_watermark.relative | Memory threshold at which the flow control is triggered. Can be absolute or relative to the amount of RAM available to the OS | -  | vm_memory_high_watermark.relative = 0.4 |
| vm_memory_calculation_strategy | Strategy for memory usage reporting | allocated<br/><br/>rss<br/><br/>legacy<br/><br/>erlang | vm_memory_calculation_strategy = allocated |
| vm_memory_high_watermark_paging_ratio | Fraction of the high watermark limit at which queues start to page messages out to disc to free up memory. See the [memory-based flow control](https://www.rabbitmq.com/memory.html) documentation. | -  | vm_memory_high_watermark_paging_ratio = 0.5 |
| total_memory_available_override_value | Makes it possible to override the total amount of memory available, as opposed to inferring it from the environment using OS-specific means. This should only be used when actual maximum amount of RAM available to the node doesn't match the value that will be inferred by the node, e.g. due to containerization or similar constraints the node cannot be aware of. The value may be set to an integer number of bytes or, alternatively, in information units (e.g `8GB`). For example, when the value is set to 4 GB, the node will believe it is running on a machine with 4 GB of RAM | -  | -  |
| disk_free_limit.absolute | Disk free space limit of the partition on which RabbitMQ is storing data. When available disk space falls below this limit, flow control is triggered. The value can be set relative to the total amount of RAM or as an absolute value in bytes or, alternatively, in information units (e.g `50MB` or `5GB`) | -  | disk_free_limit.absolute = 50MB |
| log.file.level | Controls the granularity of logging. The value is a list of log event category and log level pairs. | error<br/><br/>warning<br/><br/>info<br/><br/>debug | log.file.level = info |
| channel_max | Maximum permissible number of channels to negotiate with clients, not including a special channel number 0 used in the protocol. Setting to 0 means "unlimited", a dangerous value since applications sometimes have channel leaks. Using more channels increases memory footprint of the broker. | -  | channel_max = 2047 |
| channel_operation_timeout | Channel operation timeout in milliseconds (used internally, not directly exposed to clients due to messaging protocol differences and limitations). | -  | channel_operation_timeout = 15000 |
| max_message_size | The largest allowed message payload size in bytes. Messages of larger size will be rejected with a suitable channel exception. | Max value: 536870912 | max_message_size = 134217728 |
| heartbeat | Value representing the heartbeat timeout suggested by the server during connection parameter negotiation. If set to 0 on both ends, heartbeats are disabled (this is not recommended). See the [Heartbeats guide](https://www.rabbitmq.com/heartbeats.html) for details. | -  | heartbeat = 60 |
| default_vhost | Virtual host to create when RabbitMQ creates a new database from scratch. The exchange `amq.rabbitmq.log` will exist in this virtual host. | -  | default_vhost = / |
| collect_statistics | Statistics collection mode. Primarily relevant for the management plugin. | none<br/><br/>coarse<br/><br/>fine | collect_statistics = none |
| collect_statistics_interval | Statistics collection interval in milliseconds. Primarily relevant for the [management plugin](https://www.rabbitmq.com/management.html#statistics-interval). | -  | collect_statistics_interval = 5000 |
| management_db_cache_multiplier | Affects the amount of time the [management plugin](https://www.rabbitmq.com/management.html#statistics-interval) will cache expensive management queries such as queue listings. The cache will multiply the elapsed time of the last query by this value and cache the result for this amount of time. | -  | management_db_cache_multiplier = 5 |
| delegate_count | Number of delegate processes to use for intra-cluster communication. On a machine which has a very large number of cores and is also part of a cluster, you may wish to increase this value. | -  | delegate_count = 16 |
| hipe_compile | Do not use. This option is no longer supported. HiPE supported has been dropped starting with Erlang 22. | -  | hipe_compile = false |
| cluster_partition_handling | How to handle network partitions. | ignore<br/><br/>autoheal<br/><br/>pause_minority<br/><br/>pause_if_all_down | cluster_partition_handling = ignore |
| cluster_keepalive_interval | How frequently nodes should send keepalive messages to other nodes (in milliseconds). Note that this is not the same thing as [net_ticktime](https://www.rabbitmq.com/nettick.html); missed keepalive messages will not cause nodes to be considered down. | -  | cluster_keepalive_interval = 10000 |
| queue_index_embed_msgs_below | Size in bytes of message below which messages will be embedded directly in the queue index. You are advised to read the [persister tuning](https://www.rabbitmq.com/persistence-conf.html) documentation before changing this. | -  | queue_index_embed_msgs_below = 4096 |
| mnesia_table_loading_retry_timeout | Timeout used when waiting for Mnesia tables in a cluster to become available. | -  | mnesia_table_loading_retry_timeout = 30000 |
| mnesia_table_loading_retry_limit | Retries when waiting for Mnesia tables in the cluster startup. Note that this setting is not applied to Mnesia upgrades or node deletions. | -  | mnesia_table_loading_retry_limit = 10 |
| mirroring_sync_batch_size | Batch size used to transfer messages to an unsynchronised replica (queue mirror). See [documentation on eager batch synchronization](https://www.rabbitmq.com/ha.html#batch-sync). | -  | mirroring_sync_batch_size = 4096 |
| queue_master_locator | queue leader location strategy. Available strategies are | min-masters<br/><br/>client-local<br/><br/>random | queue_master_locator = client-local |

更多参数支持请前往 [RabbitMQ 官网](https://www.rabbitmq.com/configure.html#config-items) 查阅。
