---
weight: 40
---

# 架构

RabbitMQ 的架构是基于消息队列模式的，它由多个组件构成，包括生产者（Producers）、消息队列（Message Queues）、消费者（Consumers）和代理（Broker）。

RabbitMQ 中包含几个角色：

* **生产者（Producers）**：生产者负责创建和发送消息到 RabbitMQ 的消息队列。它们将消息发布到交换机（Exchange）上，并且指定了消息的路由键（Routing Key）。
* **交换机（Exchange）**：交换机接收来自生产者的消息，并根据消息的路由键将消息路由到一个或多个消息队列。交换机有不同的类型，如直接交换机、主题交换机、扇形交换机等，它们根据路由键的匹配规则来确定消息的路由方式。
* **消息队列（Message Queues）**：消息队列是 RabbitMQ 的核心组件，它存储着待处理的消息。消息队列以先进先出（FIFO）的方式管理消息，保证消息的顺序性。消费者从消息队列中获取消息进行处理。
* **消费者（Consumers）**：消费者从消息队列中获取消息，并进行相应的处理。消费者可以订阅一个或多个消息队列，并根据需要指定消息的确认机制，确保消息在被消费后得到确认。
* **代理（Broker）**：代理是 RabbitMQ 的核心组件，它接收来自生产者的消息，并将其路由到相应的消息队列。代理还负责管理消息的传递、确认和持久化存储等功能。

RabbitMQ 的架构支持多种消息传递模式，如点对点模式、发布/订阅模式和请求/回复模式。它还提供了灵活的路由规则、持久化存储、消息的可靠性传递和消息的优先级等特性，以满足不同场景下的需求。

下图展示了通过**交换机**发布和消费消息的流程。

![消息收发模型](./assets/rabbitmq-arch-1.png)

关于个部件的概念原理，请参考[核心概念](./concepts)。
