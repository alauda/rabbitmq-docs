---
weight: 30
sourceSHA: f91034b70494b1f4810f7e195cf22763dfaaea60058a5fc4a229a17708db1716
---

# Parameter Configuration

The RabbitMQ instance defaults to the system parameters provided by RabbitMQ. You can also conveniently configure the parameters through the interface.

<Directive type="info" title="Tip">
  After upgrading RabbitMQ, if there are parameters that need to be deleted, deprecated, or changed, please refer to the [RabbitMQ official website](https://www.rabbitmq.com/configure.html#config-items) for the corresponding changes.
</Directive>

<Directive type="warning" title="Warning">
  Updating parameters will cause the instance to restart. For the stability of your application, please update parameters during off-peak hours.
</Directive>

## Procedure

<Tabs>
  <Tab label="CLI">
    The parameters for the data nodes of the instance are specified through the `spec.rabbitmq.additionalConfig` field of the RabbitMQ CR resource.

    ```bash
    # Update the data node configuration of the s6 instance
    $ kubectl -n default patch rabbitmqclusters <instance name> --type=merge --patch='{"spec": {"rabbitmq": {"additionalConfig":"channel_max=1000"}}}''
    ```
  </Tab>

  <Tab label="Web Console">
    1. Click **RabbitMQ** in the left navigation bar.

    2. Click on ***namespace name***.

    3. Click on ***instance name***.

    4. Under the **Parameter** tab, click **Update Parameters**.

    5. Set the parameters.

    6. Click **Update**.
  </Tab>
</Tabs>

## Parameter Support Description

| Parameter Name                               | Parameter Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Value Range                                                                                | Default Value                                      |
| ------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------ |
| num\_acceptors.tcp                         | The number of Erlang processes that will accept connections for the TCP listeners.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | -                                                                                     | num\_acceptors.tcp = 10                          |
| handshake\_timeout                         | Maximum time for AMQP 0-9-1 handshake (after socket connection and TLS handshake), in milliseconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | -                                                                                     | handshake\_timeout = 10000                       |
| vm\_memory\_high\_watermark.relative       | Memory threshold at which flow control is triggered. This can be absolute or relative to the amount of RAM available to the OS.                                                                                                                                                                                                                                                                                                                                                                                                                                                           | -                                                                                     | vm\_memory\_high\_watermark.relative = 0.4       |
| vm\_memory\_calculation\_strategy          | Strategy for memory usage reporting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | allocated<br /><br />rss<br /><br />legacy<br /><br />erlang                          | vm\_memory\_calculation\_strategy = allocated    |
| vm\_memory\_high\_watermark\_paging\_ratio | Fraction of the high watermark limit at which queues start to page messages out to disk to free up memory. See the [memory-based flow control](https://www.rabbitmq.com/memory.html) documentation.                                                                                                                                                                                                                                                                                                                                                                               | -                                                                                     | vm\_memory\_high\_watermark\_paging\_ratio = 0.5 |
| total\_memory\_available\_override\_value  | Allows overriding the total amount of memory available, instead of inferring it from the environment using OS-specific means. This should only be used when the actual maximum amount of RAM available to the node doesn't match the value inferred by the node, e.g., due to containerization or similar constraints unknown to the node. The value may be set to an integer number of bytes or, alternatively, in human-readable units (e.g., `8GB`). For example, when set to 4 GB, the node believes it is running on a machine with 4 GB of RAM. | -                                                                                     | -                                                |
| disk\_free\_limit.absolute                 | Disk free space limit of the partition on which RabbitMQ stores data. When the available disk space falls below this limit, flow control is triggered. The value can be set relative to the total amount of RAM or as an absolute value in bytes or, alternatively, in human-readable units (e.g., `50MB` or `5GB`).                                                                                                                                                                                                                                   | -                                                                                     | disk\_free\_limit.absolute = 50MB                |
| log.file.level                             | Controls the granularity of logging. The value is a list of log event category and log level pairs.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | error<br /><br />warning<br /><br />info<br /><br />debug                             | log.file.level = info                            |
| channel\_max                               | Maximum permissible number of channels that can be negotiated with clients, excluding a special channel number 0 used in the protocol. Setting it to 0 means "unlimited," which is a dangerous value as applications may sometimes have channel leaks. Using more channels increases the memory footprint of the broker.                                                                                                                                                                                                                   | -                                                                                     | channel\_max = 2047                              |
| channel\_operation\_timeout                | Channel operation timeout in milliseconds (used internally, not directly exposed to clients due to messaging protocol differences and limitations).                                                                                                                                                                                                                                                                                                                                                                                                                                         | -                                                                                     | channel\_operation\_timeout = 15000              |
| max\_message\_size                         | Largest allowed message payload size in bytes. Messages larger than this size will be rejected with a suitable channel exception.                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Max value: 536870912                                                                  | max\_message\_size = 134217728                   |
| heartbeat                                  | Value representing the heartbeat timeout suggested by the server during connection parameter negotiation. If set to 0 on both ends, heartbeats are disabled (this is not recommended). See the [Heartbeats guide](https://www.rabbitmq.com/heartbeats.html) for details.                                                                                                                                                                                                                                                                                                                  | -                                                                                     | heartbeat = 60                                   |
| default\_vhost                             | Virtual host created when RabbitMQ creates a new database from scratch. The exchange `amq.rabbitmq.log` will exist in this virtual host.                                                                                                                                                                                                                                                                                                                                                                                                                                                    | -                                                                                     | default\_vhost = /                               |
| collect\_statistics                        | Statistics collection mode. Primarily relevant for the management plugin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | none<br /><br />coarse<br /><br />fine                                                | collect\_statistics = none                       |
| collect\_statistics\_interval              | Statistics collection interval in milliseconds. Primarily relevant for the [management plugin](https://www.rabbitmq.com/management.html#statistics-interval).                                                                                                                                                                                                                                                                                                                                                                                                                               | -                                                                                     | collect\_statistics\_interval = 5000             |
| management\_db\_cache\_multiplier          | Affects the amount of time the [management plugin](https://www.rabbitmq.com/management.html#statistics-interval) caches expensive management queries, such as queue listings. The cache will multiply the elapsed time of the last query by this value and cache the result for this duration.                                                                                                                                                                                                                                              | -                                                                                     | management\_db\_cache\_multiplier = 5            |
| delegate\_count                            | Number of delegate processes to use for intra-cluster communication. On machines with a very large number of cores and that are also part of a cluster, you may wish to increase this value.                                                                                                                                                                                                                                                                                                                                                                                                    | -                                                                                     | delegate\_count = 16                             |
| hipe\_compile                              | Do not use. This option is no longer supported. HiPE support has been dropped starting with Erlang 22.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | -                                                                                     | hipe\_compile = false                            |
| cluster\_partition\_handling               | How to handle network partitions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | ignore<br /><br />autoheal<br /><br />pause\_minority<br /><br />pause\_if\_all\_down | cluster\_partition\_handling = ignore            |
| cluster\_keepalive\_interval               | How frequently nodes should send keepalive messages to each other (in milliseconds). Note that this is not the same as [net\_ticktime](https://www.rabbitmq.com/nettick.html); missed keepalive messages will not cause nodes to be considered down.                                                                                                                                                                                                                                                                                                                                   | -                                                                                     | cluster\_keepalive\_interval = 10000             |
| queue\_index\_embed\_msgs\_below           | Size in bytes of messages below which messages will be embedded directly in the queue index. It is advisable to refer to the [persister tuning](https://www.rabbitmq.com/persistence-conf.html) documentation before modifying this.                                                                                                                                                                                                                                                                                                                                                      | -                                                                                     | queue\_index\_embed\_msgs\_below = 4096          |
| mnesia\_table\_loading\_retry\_timeout     | Timeout used when waiting for Mnesia tables in a cluster to become available.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | -                                                                                     | mnesia\_table\_loading\_retry\_timeout = 30000   |
| mnesia\_table\_loading\_retry\_limit       | Number of retries when waiting for Mnesia tables during cluster startup. Note that this setting does not apply to Mnesia upgrades or node deletions.                                                                                                                                                                                                                                                                                                                                                                                                                                 | -                                                                                     | mnesia\_table\_loading\_retry\_limit = 10        |
| mirroring\_sync\_batch\_size               | Batch size used to transfer messages to an unsynchronized replica (queue mirror). See [documentation on eager batch synchronization](https://www.rabbitmq.com/ha.html#batch-sync).                                                                                                                                                                                                                                                                                                                                                                                                      | -                                                                                     | mirroring\_sync\_batch\_size = 4096              |
| queue\_master\_locator                     | Queue leader location strategy. Available strategies are                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | min-masters<br /><br />client-local<br /><br />random                                 | queue\_master\_locator = client-local            |

For more supported parameters, please refer to the [RabbitMQ official website](https://www.rabbitmq.com/configure.html#config-items).
